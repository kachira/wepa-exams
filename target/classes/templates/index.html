<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <!-- Author: W3layouts
    Author URL: http://w3layouts.com
    License: Creative Commons Attribution 3.0 Unported
    License URL: http://creativecommons.org/licenses/by/3.0/ -->
    <head>
        <title>cyan Flat ui kit Website Template | Home :: w3layouts</title>
        <link href="../../static/css/bootstrap.css" th:href="@{/static/css/bootstrap.css}" rel="stylesheet" type="text/css" />
        <script src="../../static/js/jquery.min.js" th:src="@{/static/js/jquery.min.js}"></script>
        <link href="../../static/css/style.css" th:href="@{/static/css/style.css}" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="../../static/fonts/css/font-awesome.min.css" th:href="@{/static/fonts/css/font-awesome.min.css}" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    </head>
    <body>
        <!-- container -->
        <div class="container">
            <div class="top-header">
                <!-- script-for-sidepanle-nav -->
                <link type="text/css" rel="stylesheet" href="../../static/css/jquery.mmenu.all.css" th:href="@{/static/css/jquery.mmenu.all.css}" />
                <script type="text/javascript" src="../../static/js/jquery.mmenu.js" th:src="@{/static/js/jquery.mmenu.js}"></script>
                <script type="text/javascript">
                    //	The menu on the left
                    $(function () {
                        $('nav#menu-left').mmenu();
                    });
                </script>
                <!-- script-for-sidepanle-nav -->
                <div id="page">
                    <div id="header">
                        <a href="#menu-left"> </a>
                    </div>
                    <nav id="menu-left">
                        <ul>
                            <li><a href="#">Welcome!</a></li>
                            <li class="active"><a href="#">Works</a></li>
                            <li><a href="#">Features</a></li>
                            <li><a href="#">About</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="logo">
                    <span th:text="${self.name}">Dashboard </span>
                </div>
                <!-- usernotifications -->
                <div class="usernotifications">
                    <ul class="user-profile list-unstyled">
                        <li><a href="#"><img src="../../static/images/user-pic.jpg" th:src="@{/static/images/user-pic.jpg}" title="admin" /></a>
                            <ul class="sub list-unstyled">
                                <li><a href="#">Profile</a></li>
                                <li><a href="#">Settings</a></li>
                                <li><a href="#">custom</a></li>
                            </ul>
                        </li>
                    </ul>

                    <ul class="notification list-unstyled user-profile" th:if="${friendshipRequests}">
                        <li><a th:href="@{/friends}"><img src="../../static/images/notification-icon.png" th:src="@{/static/images/notification-icon.png}" title="notifications" /></a>
                            <!-- <ul class="sub list-unstyled">
                                <li><a href="#">20</a></li>
                            </ul> -->
                        </li>
                    </ul>

                    <ul class="logout list-unstyled">
                        <li><a href="#" onclick="document.getElementById('logout-form').submit();"><span> </span></a></li>
                    </ul>
                    <form style="visibility: hidden" id ="logout-form" method="post" action="#" th:action="@{/logout}"><input type="submit" value="Logout"/></form>                    
                </div>
                <div class="clearfix"> </div>
                <!-- usernotifications -->
            </div>
            <div class="clearfix"> </div>
            <!-- content -->
            <div class="content">
                <div class="3-cols">
                    <div class="col-1 col-md-3">

                        <!-- user-profiles -->
                        <div th:each="user : ${users}">
                            <div class="user-profile1 text-center">
                                <img src="../../static/images/people.png" th:src="@{/static/images/people.png}" title="name" />
                                <h3 th:text="${user.name}">Zach Dunes</h3>
                                <p th:text="${user.slogan}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec dapibus dui id libero auctor cursus. </p>
                                <form method="POST" th:action="@{/friends}">
                                    <input type="hidden" name="personId" th:value="${user.id}"/>
                                    <input type="submit" class="p-btn" value="Friend 'em!"/>
                                </form>
                            </div>
                            <hr/>
                        </div>
                        <!-- user-profiles -->



                    </div><!-- End-col-1 -->
                    <!-- col-2 -->
                    <div class="col-2 col-md-3">
                        <!-- p><input type="button" onclick="send();" value="Say Wut!"/></p -->
                        <!-- broker -->
                        <script src="//cdnjs.cloudflare.com/ajax/libs/sockjs-client/0.3.4/sockjs.min.js"></script>
                        <script src="//cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
                        <script th:inline="javascript">
                            // luodaan asiakasohjelmisto, joka rekister√∂ityy osoitteeseen "/register"
                            var client = Stomp.over(new SockJS('/register'));
                            var name = /*[[${self.name}]]*/ 'joku';

                            function send() {
                                client.send("/app/messages", {}, JSON.stringify({'message': document.getElementById('sbmessage').value, 'name': name}));
                            }

                            function displayMessage(message) {
                                var chatMsgDiv = document.createElement('div');
                                chatMsgDiv.className = "chat-msg";

                                // Image div
                                var imgDiv = document.createElement('div');
                                imgDiv.className = "col-xs-2 chat-people";
                                imgDiv.title = message.name;

                                var userImg = document.createElement('img');
                                userImg.src = /*[[@{/static/images/user-pic.jpg}]]*/ 'vitut';
                                imgDiv.appendChild(userImg);

                                chatMsgDiv.appendChild(imgDiv);
                                // Msg body div
                                var msgBodyDiv = document.createElement('div');
                                msgBodyDiv.className = "col-xs-9 chat-msg-on";
                                chatMsgDiv.appendChild(msgBodyDiv);

                                var message = document.createTextNode(message.message);
                                var p = document.createElement('p');
                                p.appendChild(message);
                                msgBodyDiv.appendChild(p);

                                var clearDiv = document.createElement('div');
                                clearDiv.className = "clearfix";
                                chatMsgDiv.appendChild(clearDiv);
                                document.getElementById("sbarea").appendChild(chatMsgDiv);
                            }

                            client.connect({}, function (frame) {
                                client.subscribe('/chat', function (response) {
                                    displayMessage(JSON.parse(response.body));
                                });
                            });

                            window.onbeforeunload = function () {
                                client.disconnect();
                            }
                        </script>

                        <!-- broker -->

                        <!-- chat-box -->
                        <div class="chat-box1">
                            <h3> Shoutbox</h3>
                            <div class="people-on-chat" id="sbarea">

                                <!---->
                            </div>
                            <!-- msg-type-box -->
                        </div>
                        <div class="chat-box2">

                            <div class="msg-type-box">
                                <form>
                                    <input type="text" 
                                           name="sbmessage" 
                                           id="sbmessage" 
                                           value="Type your message..."
                                           onkeydown="if (event.keyCode == 13) {
                                                       send();
                                                   }"
                                           onfocus="this.value = '';" 
                                           onblur="if (this.value == '') {
                                                       this.value = 'Type your message...';
                                                   }">

                                    </input>
                                    <input type="button" onclick="send();" value="Send" />
                                </form>
                            </div>
                            <!-- msg-type-box -->
                        </div>
                        <div class="clearfix"> </div>
                        <!-- chat-box -->
                    </div><!-- End-col-2 -->
                    <!-- col-3 -->
                    <div class="col-md-6 col-3">
                        <div class="col-3-grid-1">
                            <!-- get-in-touch -->

                            <div class="get-in-touch">
                                <h3>What's going on?</h3>
                                <!---->
                                <form method="POST" th:action="@{/posts}">
                                    <div class="get-in-touch-text-boxs">
                                        <div class="get-in-touch-text-box">
                                            <textarea name="content"> </textarea>
                                        </div>
                                        <div class="clearfix"> </div>
                                        <input type="submit" value="Let 'em know!" />
                                    </div>
                                </form>
                            </div>
                            <!-- get-in-touch -->
                        </div>
                        <!-- col-3-grid-2 -->
                        <div class="col-3-grid-2">

                        </div>
                        <!-- col-3-grid-2 -->
                        <!-- col-3-grid-3 -->
                        <div class="col-3-grid-3 ">

                        </div>
                        <!-- col-3-grid-3 -->
                        <!-- col-3-grid-4 -->
                        <div class="col-3-grid-4">

                        </div>
                        <!-- col-3-grid-4 -->
                        <!-- col-3-grid-5 -->

                        <div class="col-3-grid-5 timer-note" th:each="post : ${posts}">
                            <div class="col-md-3 timer-people">
                                <img src="../../static/images/01.jpg" th:src="@{/static/images/01.jpg}" title="name" />
                            </div>
                            <div class="col-md-9 timer-info">

                                <h3 class="t-name" th:if="${post.author != null}" th:text="${post.author.name}">Patel Banoni</h3>
                                <h3 class="t-name" th:if="${post.author == null}">Anonymous</h3>

                                <span class="t-time"><label> </label> <span th:text="${#calendars.format(post.date,'yyyy MMMM dd HH:mm')}">4:35</span></span>
                                <div class="clearfix"> </div>
                                <p th:text="${post.content}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec dapibus dui id libero auctor cursus.</p>
                                <b class="t-arrow"> </b>

                                <form style="visibility: hidden" th:id="@{like-{id}(id=${post.id})}" method="post" action="#" th:action="@{/likes}"><input type="text" name="resourceId" th:value="${post.id}"></input><input type="submit" value="Like"/></form>
                                <p><a href="#" th:id="@{like-link-{id}(id=${post.id})}" th:onclick="@{meGusta(event, 'like-{id}', '{id}')(id=${post.id})}">+1 like</a> <span class="like-text" th:id="@{like-text-{id}(id=${post.id})}">13 likes</span></p>
                            </div>
                            <div class="clearfix"> </div>
                            <hr/>
                        </div>
                        <!-- start-audio-plyer -->
                        <!-- start-audio-plyer-files -->
                        <link rel="stylesheet" href="../../static/css/bbplayer.css" th:href="@{/static/css/bbplayer.css}"/>
                        <script src="../../static/js/bbplayer.js" th:src="@{/static/js/bbplayer.js}"></script>
                        <!-- End-audio-plyer-files -->
                        <div class="audio-plyer">
                            <div class="bbplayer">
                                <span class="bb-play"></span><span class="bb-rewind"></span><span class="bb-forward"></span>
                                <span class="bb-trackTime">--:--</span> /
                                <span class="bb-trackLength">--:--</span>
                                <span class="bb-trackTitle">&nbsp;</span>
                                <audio>
                                    <source src="../../static/media/Blue Browne.ogg" th:src="@{/static/media/Blue Browne.ogg}" type="audio/ogg"></source>
                                    <source src="../../static/media/Blue Browne.mp3" th:src="@{/static/media/Blue Browne.mp3}" type="audio/mpeg"></source>
                                    <source src="../../static/media/Georgia.ogg" th:src="@{/static/media/Georgia.ogg}" type="audio/ogg"></source>
                                    <source src="../../static/media/Georgia.mp3" th:src="@{/static/media/Georgia.mp3}" type="audio/mpeg"></source>
                                </audio>
                            </div>
                        </div>
                        <!-- End-audio-player -->
                        <!-- col-3-grid-5 -->
                        <!-- copy-right -->
                        <div class="copy-right">
                            <p>Template by <a href="http://w3layouts.com/">w3layouts</a></p>
                        </div>
                        <!-- copy-right -->
                    </div>
                    <!-- col-3 -->
                    <div class="clearfix"> </div>
                </div>
            </div>
            <!-- content -->

        </div>
        <!-- container -->

        <script th:src="@{/static/js/likey.js}"></script>
    </body>
</html>